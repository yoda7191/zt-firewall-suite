#!/bin/bash

usage() {
    echo "Usage: suitectl <command>"
    echo "Commands:"
    echo "  firewall <rule>   Apply a firewall rule"
    echo "  swarm             Initialize Docker Swarm"
    echo "  vnc               Start VNC server"
    echo "  update            Update suite"
}

case "$1" in
    firewall)
        sudo modules/firewall/bin/fwctl set-rule ${2:-zerotier-swarm}
        ;;

    swarm)
        sudo modules/docker-swarm/swarm-init.sh
        ;;

    vnc)
        sudo modules/vnc/vncserver.sh
        ;;

    update)
        git -C /opt/zt-firewall-suite pull origin main
        ;;

    *)
        usage
        ;;
esac